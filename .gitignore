# ============================================================
# DGX System Snapshot — Enterprise-Grade .gitignore
# ============================================================
# Purpose:
#   Keep version control limited to reproducible, host-level configs.
#   Exclude transient, vendor, and sensitive system content.
# ============================================================

# --- Global ignore defaults ---
# Ignore everything by default
*

# --- Whitelist (allow) key config areas ---
!.gitignore
!README.md
!etc/
!libvirt/
!meta/

# --- Explicit exclusions inside etc/ ---
# OS/vendor-provided, generated, or secret-heavy areas
etc/pki/
etc/crypto-policies/
etc/alternatives/
etc/dconf/
etc/fonts/
etc/X11/
etc/java/
etc/gdm/
etc/motd.d/
etc/issue.d/
etc/ssh/ssh_host_*
etc/ssl/private/
etc/pki/pesign/
etc/selinux/targeted/active/
etc/.pwd.lock
etc/shadow*
etc/gshadow*
etc/passwd-
etc/group-
etc/subuid-
etc/subgid-

# --- libvirt hygiene ---
# Keep only definitions, ignore transient runtime data
libvirt/images/
libvirt/snapshots/
libvirt/dumps/
libvirt/private/

# --- meta hygiene ---
# Allow metadata manifests and summaries, ignore temp artifacts
!meta/
meta/*.txt
!meta/snapshot-meta-*.txt
!meta/summary-*.txt

# --- Local staging and transient areas ---
staging/
tmp/
var/
run/
cache/
swap/

# --- Archives and logs ---
*.tar
*.tar.gz
*.tgz
*.zip
*.log
*.bak
*.old
*.tmp
*.swp
*.pid
*.lock
rclone-upload.log
system-config-snapshot.log

# --- Prevent recursion and binary noise ---
*.iso
*.img
*.qcow2
*.vmdk

# --- Editor/system detritus ---
.DS_Store
Thumbs.db

# ============================================================
# Result:
#   Tracks only clean, deterministic configuration snapshots:
#     - etc/   → sanitized system configuration
#     - libvirt/ → VM and network definitions
#     - meta/  → snapshot manifests + summaries
#   Fully ignores:
#     - staging/ temp areas
#     - binary, runtime, and vendor OS content
# ============================================================
